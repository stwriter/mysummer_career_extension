# MySummer Career Extension - Game Design Document

## Vision Statement

MySummer es una extensión de carrera para BeamNG.drive inspirada en "My Summer Car". El jugador vive la historia de un joven mecánico que hereda el coche de su abuelo y un chasis de proyecto, con el sueño de competir en "The Big One" - la carrera más prestigiosa del circuito underground que otorga ₿1,000,000 al ganador.

**Duración estimada:** ~40 horas hasta The Big One

---

## Historia Principal

### Prólogo: La Herencia

*"Tu abuelo siempre decía que los coches tienen alma. Pasaste innumerables tardes de verano en su garaje, viéndole trabajar en su viejo Ibishu Miramar mientras te contaba historias de sus días de juventud corriendo por las carreteras de la costa."*

*"Ahora él ya no está, pero te ha dejado el Miramar que tanto amaba. Es un coche de serie, sin modificaciones, con más de 200.000 kilómetros en el odómetro - pero está en perfecto estado mecánico. Tu abuelo lo cuidaba como si fuera de la familia."*

*"También te dejó algo de dinero en el banco. No es mucho, pero es suficiente para empezar. Y en una esquina del garaje, cubierto por una lona polvorienta, un viejo chasis de ETK-I que compró hace años pensando en restaurarlo algún día. 'Tiene potencial', solía decir. 'Solo necesita a alguien con tiempo y pasión.'"*

*"Entre sus cosas encontraste un recorte de periódico amarillento sobre 'The Big One', la legendaria carrera que él nunca pudo correr. En el reverso, con su letra temblorosa, escribió: 'Hazlo por los dos.'"*

---

### Acto 1: Carreras Entre Amigos
**~8 horas de juego**

El jugador comienza con el Miramar de su abuelo como único vehículo funcional. El ETK-I es solo un chasis vacío en el garaje que necesita piezas básicas para arrancar.

**Situación inicial:**
- Miramar de serie, 200.000+ km, perfecto estado
- Dinero inicial modesto (₿10,000)
- ETK-I solo chasis, sin motor ni transmisión
- Sin reputación en el mundillo

**Objetivo:** Ganar dinero y reputación en carreras informales para conseguir las primeras piezas del ETK-I.

**Actividades:**
- Carreras improvisadas con amigos en caminos rurales
- Apuestas pequeñas (₿500-2,000)
- El Miramar es lento pero predecible
- Trabajos ocasionales para ganar dinero extra
- Búsqueda de piezas baratas en el mercado de segunda mano

*"Las primeras carreras son casi por diversión. Tus amigos y tú os juntáis los sábados por la noche en el aparcamiento del supermercado abandonado. Las apuestas son pequeñas - nadie quiere perder más de lo que puede permitirse. Pero es aquí donde empiezas a entender lo que significa competir de verdad."*

**Hito del Acto:** El ETK-I arranca por primera vez.

---

### Acto 2: Rallys Locales
**~10 horas de juego**

Con algo de experiencia y un ETK-I que por fin arranca (aunque básico), el jugador empieza a participar en eventos semi-oficiales.

**Situación:**
- ETK-I funcional pero con piezas básicas
- Miramar sigue siendo opción para carreras fáciles
- Reputación local creciente
- Acceso a eventos organizados

**Objetivo:** Construir reputación en el circuito amateur y mejorar el ETK-I.

**Actividades:**
- Rallys de tierra y asfalto organizados
- Premios modestos pero consistentes (₿3,000-7,000)
- Primeras modificaciones serias al ETK-I
- Aparecen los primeros rivales recurrentes
- Acceso a talleres con mejores piezas

*"El viejo Miramar te trajo hasta aquí, pero el ETK-I es otra cosa. La primera vez que pisas el acelerador a fondo en una recta, entiendes por qué tu abuelo veía algo especial en este chasis. Es nervioso, exigente, pero cuando todo encaja... vuela."*

**Requisitos del Acto:**
- Algunas carreras REQUIEREN el ETK-I
- Rallys de tierra favorecen coches ligeros
- El Miramar empieza a quedarse corto

**Hito del Acto:** Primera victoria importante. Tu nombre empieza a sonar.

---

### Acto 3: El Circuito Ilegal
**~12 horas de juego**

La reputación del jugador llega a oídos de organizadores de carreras callejeras profesionales. El dinero es mayor, pero también los riesgos.

**Situación:**
- ETK-I con modificaciones de rendimiento
- Contactos en el mundillo underground
- La policía empieza a conocerte
- Acceso al mercado negro de piezas

**Objetivo:** Dominar el circuito underground y preparar el ETK-I para competición seria.

**Actividades:**
- Carreras callejeras nocturnas con apuestas altas (₿10,000-25,000)
- Piques de drag en polígonos industriales
- La policía es un riesgo real
- Rivales con coches potentes y actitudes agresivas
- Piezas ilegales disponibles (mayor rendimiento, mayor riesgo de persecución)

*"Ya no son carreras entre amigos. Aquí la gente viene a ganar, y algunos harán lo que sea necesario. El dinero es bueno, pero una mala noche puede costarte el coche... o algo peor. Y siempre hay alguien mirando - la policía no ve con buenos ojos estas reuniones nocturnas."*

**Requisitos del Acto:**
- El ETK-I es obligatorio para la mayoría de carreras
- Carreras de drag requieren preparación específica
- Gestionar el "heat" de la policía

**Hito del Acto:** Te ganas el respeto del circuito underground. Los organizadores importantes saben quién eres.

---

### Acto 4: Circuitos Profesionales
**~8 horas de juego**

Con un ETK-I completamente preparado y una reputación sólida, el jugador puede acceder a eventos de circuito cerrado.

**Situación:**
- ETK-I en configuración de competición
- Reputación establecida
- Invitaciones a eventos exclusivos
- Rivales de élite

**Objetivo:** Demostrar que puede competir al más alto nivel.

**Actividades:**
- Carreras en circuitos reales
- Competición limpia pero intensa
- El ETK-I necesita estar al máximo
- Los mejores pilotos del estado
- Premios sustanciales (₿25,000-50,000)

*"Esto ya no es la calle. Hay reglas, hay comisarios, hay público en las gradas. Pero lo más importante: hay clasificación oficial. Y la clasificación es lo que te abre las puertas de The Big One."*

**Requisitos del Acto:**
- ETK-I obligatorio y preparado
- Nivel mínimo de reputación
- Clasificación en eventos previos

**Hito del Acto:** Recibes la invitación para The Big One.

---

### Acto 5: The Big One
**~2 horas de juego**

La carrera definitiva. Un evento legendario que combina tramos de asfalto, tierra, y secciones callejeras. Solo los mejores son invitados.

**Situación:**
- Todo preparado para el momento culminante
- ETK-I en su mejor configuración
- Los mejores pilotos del país como rivales
- Todo o nada

**La Carrera:**
- Formato multi-etapa: asfalto → tierra → tramo callejero nocturno
- ~45 minutos de carrera real
- Sin segundas oportunidades
- Premio: ₿1,000,000

*"Miles de personas alineadas en las cunetas. Cámaras de televisión. Tu nombre en las pantallas gigantes. Y en el bolsillo de tu mono de carreras, ese recorte de periódico amarillento que encontraste entre las cosas del abuelo. Es hora de hacerlo por los dos."*

**Epílogo:**
Si ganas, una cinemática muestra tu victoria, el cheque del millón, y una imagen de ti mirando el recorte del periódico con una sonrisa. "Lo hicimos, abuelo."

---

## Sistema de Progresión

### Niveles de Street Racing

| Nivel | Nombre | XP Requerido | Acto | Descripción |
|-------|--------|--------------|------|-------------|
| 1 | Rookie Racer | 0 | 1 | Nuevo en la escena, carreras entre amigos |
| 2 | Known Driver | 250 | 1-2 | Empiezas a ser reconocido en eventos locales |
| 3 | Street Regular | 750 | 2-3 | Habitual en el circuito de rallys amateur |
| 4 | Underground Star | 1500 | 3-4 | Tu nombre circula en el mundillo ilegal |
| 5 | Street Legend | 3000 | 4-5 | Leyenda del asfalto, candidato a The Big One |

### Recompensas por Carrera (Base)

| Tipo de Carrera | Victoria (Gold) | Podio (Silver) | Terminar | XP |
|-----------------|-----------------|----------------|----------|-----|
| Entre amigos | ₿500 | ₿250 | Solo XP | 25-50 |
| Rally local | ₿1,500 | ₿800 | Solo XP | 50-100 |
| Carrera ilegal | ₿3,000 | ₿1,500 | Solo XP | 100-200 |
| Circuito pro | ₿5,000 | ₿2,500 | Solo XP | 200-400 |
| The Big One | ₿100,000 | ₿25,000 | ₿10,000 | 1000 |

**Nota:** "Terminar" (justFinish) solo otorga XP de reputación, no dinero. Esto incentiva al jugador a mejorar su rendimiento.

### Economía Estimada (40h)

- **Dinero inicial:** ₿5,000
- **Coste ETK-I completo:** ~₿100,000
- **Carreras estimadas:** ~60-80 carreras en 40 horas
- **Ingresos por carrera (promedio):** ~₿1,500-2,000
- **Ingresos totales estimados:** ~₿120,000-150,000
- **Gastos (reparaciones, piezas, etc.):** ~₿20,000-30,000
- **Premio The Big One:** ₿100,000 (dobla tu inversión)

---

## Vehículos del Jugador

### Vehículo Inicial: Ibishu Miramar

*El coche de tu abuelo. Lento pero noble.*

- **Estado:** De serie, 800.000-1.000.000 km, estado mecánico aceptable
- **Motor:** Stock, sin modificaciones
- **Rendimiento:** Bajo-medio, predecible
- **Uso:** Carreras Acto 1, opcional después
- **Carácter:** Fiable, nostálgico, límite bajo pero honesto

El Miramar representa la conexión con el abuelo. No es rápido, pero es el coche que te enseñó a competir.

### Vehículo Proyecto: ETK-I 2400ti TT Sport

*El sueño de tu abuelo. Tu misión.*

- **Estado inicial:** Chasis con ruedas, 500.000-800.000 km, necesita TODO lo demás
- **Potencial:** Con las piezas correctas, puede competir al más alto nivel
- **Requisito:** Obligatorio para carreras Acto 2+
- **Progresión:** De "apenas arranca" a "bestia de competición"

El ETK-I es el verdadero protagonista mecánico. Su evolución refleja tu progreso como piloto.

**Configuración inicial del chasis** (basada en `rolling.pc`):
- Carrocería básica (`etki_body`) con interior sport
- Ruedas de acero 14x5.5" (`steelwheel_01a_14x5.5_F/R_alt`) con neumáticos 175/65 R14 standard
- Suspensión básica (solo wheeldata, sin struts/coilovers/frenos)
- Interior con gauges metric TT sport y skin interior sport
- Pintura azul oscuro mate (RGB: 0.03, 0.06, 0.2) sin clearcoat
- **Vacío:** Motor, transmisión, escape, radiador, depósito, ABS, frenos, diferencial, volante, asientos, puertas, capó, maletero, parachoques, faros, pilotos, etc.
- Matrícula italiana antigua (license_plate_italy_old_2_1)

### Futuro: Selección de Chasis Inicial

En versiones futuras, el jugador podrá elegir su vehículo proyecto al inicio:

| Chasis | Dificultad | Carácter |
|--------|------------|----------|
| ETK-I | Normal | Equilibrado, buen potencial de tuning |
| Ibishu Pessima | Difícil | Económico pero limitado, para expertos |

---

## Características Actuales (v0.1)

### Implementado

- [x] **Sistema de Progresión Nativo**
  - Domain `mysummer` registrado en BeamNG
  - Skill `streetracing` con 5 niveles
  - Integración con sistema de estrellas de misiones
  - Progreso visible en UI nativa de BeamNG

- [x] **Carreras Street Racing**
  - 10 carreras callejeras disponibles
  - Recompensas en dinero, beamXP y mysummer-streetracing XP
  - Tracking de posición y tiempo

- [x] **Mercado de Piezas**
  - Listados legales en ubicaciones de recogida
  - Piezas ilegales con sistema de "leads"
  - Integración con policía para piezas calientes

- [x] **Vehículos Iniciales**
  - Ibishu Miramar (coche del abuelo, de serie)
  - ETK-I chasis (proyecto)

- [x] **UI**
  - Selector de carreras en teléfono
  - Pantalla de resultados post-carrera
  - Mercado de piezas en ordenador del garaje
  - Panel de career progress (MySummerCareer.vue) - muestra datos del sistema nativo

### Pendiente

- [ ] **Historia Narrativa**
  - Diálogos y eventos de historia
  - NPCs con personalidad
  - Misiones narrativas entre carreras

- [ ] **Desbloqueos por Nivel**
  - Carreras gated por nivel de reputación
  - Piezas especiales desbloqueables
  - Acceso a eventos exclusivos

- [ ] **The Big One**
  - Carrera final del juego
  - Requisitos de acceso (nivel 5, ETK-I preparado)
  - Premio de ₿1,000,000

- [ ] **Variedad de Carreras por Acto**
  - Acto 1: Carreras rurales informales
  - Acto 2: Rallys de tierra/asfalto
  - Acto 3: Street racing nocturno, drag
  - Acto 4: Circuitos cerrados
  - Acto 5: The Big One (multi-etapa)

- [ ] **Sistema de Rivales**
  - NPCs recurrentes con nombres y personalidades
  - Rivalidades que evolucionan con la historia
  - Historias secundarias

- [ ] **Requisitos de Vehículo**
  - Ciertas carreras requieren el ETK-I
  - Sistema de verificación de vehículo
  - Restricciones por tipo de evento

---

## Roadmap de Desarrollo

### Fase 1: Core Systems (Prioridad Alta)

#### 1.1 Mercado de Piezas - Segunda Mano (Wallapop Style)
- [ ] Interfaz estilo Wallapop/marketplace con listados dinámicos
- [ ] Piezas aparecen y desaparecen cada cierto tiempo (rotación)
- [ ] Precios basados en km: más km = menor precio
- [ ] Selección múltiple de piezas para recoger en un solo viaje
- [ ] **Exclusiones:** No incluir llantas, neumáticos ni pinturas en mercados de segunda mano/ilegal
- [ ] Tiendas con piezas reacondicionadas (precio intermedio)

#### 1.2 Sistema de Recogida de Piezas
- [ ] Al comprar, ir a ubicación concreta a recoger
- [ ] Escena con coche parado y maletero abierto (realismo)
- [ ] **Sistema de cargo nativo de BeamNG:**
  - Piezas tienen peso realista
  - Requiere espacio en maletero/remolque
  - Si no hay espacio, no se puede recoger la pieza

#### 1.3 Tienda Oficial de Piezas (Internet/Computer)
- [x] Mercado personalizado en sección "Internet" del ordenador del garaje
- [ ] Piezas se tachan al comprarlas (stock único)
- [ ] No se pueden volver a comprar las mismas piezas
- [ ] Catálogo tipo revista vintage con fotos del ETK-I (opcional)
  - Ofertas destacadas
  - Descripciones detalladas
  - Estética de revista de piezas de coches antiguos

#### 1.4 UI del Mercado
- [ ] Las llantas deben poder plegarse/colapsarse en los listados
- [ ] Llantas y neumáticos al mismo nivel jerárquico
- [ ] Reducir scroll necesario para llegar a neumáticos

### Fase 2: Sistema de Carreras

#### 2.1 Carreras Street
- [x] Usar carreras existentes (antiguas street races)
- [ ] Añadir nuevas carreras según sea necesario
- [ ] Al seleccionar carrera → waypoint a ubicación de inicio
- [ ] Listener que detecta llegada y activa la carrera nativa
- [ ] **Importante:** La carrera NO debe iniciarse al pasar casualmente por la zona
- [ ] Carreras se desbloquean según avance en modo carrera

#### 2.2 Rallys
- [ ] Reutilizar rallys de RLS temporalmente
- [ ] Plan futuro: crear rallys nativos de BeamNG

#### 2.3 Actualización de Carreras Street
- [ ] Actualizar carreras street existentes
- [ ] Asignar carreras a diferentes niveles del modo carrera
- [ ] Balancear dificultad progresiva

#### 2.4 Sistema de Rivales
- [ ] Diseñar rivales con dificultad progresiva
- [ ] Mismos modelos de coche pero con configuraciones más rápidas
- [ ] 2-3 rivales fijos recurrentes (con personalidad/historia)
- [ ] Resto de rivales varían o reaparecen con mejores coches

### Fase 3: Eventos Dinámicos (Opcional)

#### 3.1 Persecuciones en Carreras
- [ ] Posibilidad de que aparezca una banda persiguiéndote
- [ ] Posibilidad de persecución policial durante algunas carreras
- [ ] Añade tensión y variedad a las carreras

#### 3.2 Ambiente en Rallys (Opcional - Futuro)
- [ ] Varios coches haciendo cola delante del jugador en stages de rally
- [ ] Requiere pantalla de carga/negra para spawnear coches

### Fase 4: Sistema de Desgaste

#### 4.1 Fallos de Piezas por Kilometraje
- [ ] Investigar si BeamNG soporta fallos de piezas nativamente
- [ ] Si no existe: implementar sistema de probabilidad de fallo
- [ ] Más km en pieza = mayor probabilidad de fallo
- [ ] Incentiva comprar piezas con menos km (aunque sean más caras)

### Fase 5: Deepweb / Contactos Ilegales

#### 5.1 Sistema de Contactos con Domains Nativos
- [ ] Usar sistema nativo de domains de BeamNG para deepweb
- [ ] Cada contacto desbloquea niveles según conversaciones
- [ ] Progreso en contactos actualiza los "soplos" disponibles
- [ ] Los soplos de piezas ilegales beben de este sistema

### Fase 6: Vehículos

#### 6.1 Kilometraje Inicial de Vehículos
- [ ] Miramar inicial: 800.000 - 1.000.000 km (pendiente implementar)
- [ ] ETK-I inicial: 500.000 - 800.000 km (pendiente implementar)

#### 6.2 Configuración ETK-I Básico
- [ ] Usar configuración `rolling.pc` como base
- [ ] Solo chasis con ruedas de acero y neumáticos básicos
- [ ] **TODO:** Quitar componentes que actualmente se generan (interior completo, etc.)
- [ ] Dejar solo: carrocería, suspensión básica, ruedas de acero, neumáticos
- [ ] Vaciar: motor, transmisión, escape, interior (asientos, volante), puertas, capó, etc.
- [ ] Archivo de referencia: `etk_basico.json`

---

## Estructura de Archivos

```
mysummer_career_extension/
├── gameplay/
│   ├── domains/
│   │   └── mysummer/
│   │       ├── info.json                 # Domain principal
│   │       └── skills/
│   │           └── streetracing/
│   │               └── info.json         # Skill de carreras
│   └── missions/
│       └── west_coast_usa/
│           └── aiRace/
│               ├── 001-STREET/           # Carreras callejeras
│               ├── 002-STREET/
│               └── ...
├── lua/
│   └── ge/extensions/career/modules/
│       ├── mysummerRaceManager.lua       # Gestión de carreras
│       └── mysummerParts.lua             # Mercado de piezas
├── ui-vue-src/
│   └── modules/
│       ├── apps/mysummerRace/            # UI de carreras
│       ├── career/components/mysummer/   # Componentes (MySummerCareer.vue, etc.)
│       └── career/views/                 # Vistas del teléfono
└── docs/
    └── MYSUMMER_DESIGN.md                # Este documento
```

---

## Notas de Diseño

### Filosofía

- **Progresión orgánica:** ~40 horas de contenido antes de The Big One
- **El coche como personaje:** El ETK-I evoluciona contigo
- **Nostalgia y herencia:** El legado del abuelo da peso emocional
- **Riesgo vs recompensa:** Las carreras ilegales pagan más pero tienen consecuencias
- **Grind con propósito:** Cada carrera te acerca al objetivo

### Equilibrio Económico

El jugador debe sentir que:
- El dinero importa pero no es imposible de conseguir
- Cada mejora al ETK-I se siente como un logro
- The Big One es un premio que cambia las reglas del juego
- Hay tensión entre gastar en mejoras y ahorrar

### Referencias

- My Summer Car (progresión, construcción de coche, atmósfera)
- Need for Speed Underground (estética, carreras callejeras)
- Initial D (rivalidades, pasión por los coches, progresión)
- Gran Turismo (progresión de licencias, variedad de eventos)
- Forza Horizon (eventos variados, mundo abierto)

---

*Documento actualizado: Enero 2025*
*Versión del mod: 0.1-alpha*
